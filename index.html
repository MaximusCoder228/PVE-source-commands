<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гайд по настройке ИТ-инфраструктуры</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>Гайд по настройке ИТ-инфраструктуры</h1>
        <nav>
            <a href="#glossary">Глоссарий</a>
            <a href="#stage1">Базовая настройка</a>
            <a href="#stage2">Коммутация</a>
            <a href="#stage3">Маршрутизация</a>
            <a href="#stage4">Туннели</a>
            <a href="#stage5">Доступ в Интернет</a>
            <a href="#stage6">Синхронизация времени</a>
            <a href="#stage7">DNS</a>
            <a href="#stage8">Центр сертификации</a>
            <a href="#stage9">База данных</a>
            <a href="#stage10">Хранилище</a>
            <a href="#stage11">Active Directory</a>
            <a href="#stage12">Мониторинг</a>
            <a href="#stage13">VoIP</a>
        </nav>
    </header>

    <main>
        <section id="introduction">
            <h2>Описание</h2>
            <p>Этот сайт содержит подробные гайды по настройке различных компонентов типичной ИТ-инфраструктуры, включая маршрутизацию, коммутацию, DNS, Active Directory, системы хранения, мониторинг и VoIP. Инструкции разбиты по этапам, соответствующим задачам из технического задания.</p>
            <p>Навигация по гайдам осуществляется через меню выше или через оглавление ниже.</p>
        </section>

        <section id="glossary">
            <h2>Глоссарий терминов</h2>
            <table>
                <thead>
                    <tr>
                        <th>Термин</th>
                        <th>Пояснение</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>FQDN (Fully Qualified Domain Name)</td>
                        <td>Полное имя хоста, включающее все части домена (например, rtr-cod.cod.ssa2026.region).</td>
                    </tr>
                    <tr>
                        <td>RADIUS (Remote Authentication Dial-In User Service)</td>
                        <td>Протокол для централизованной аутентификации, авторизации и учета.</td>
                    </tr>
                    <tr>
                        <td>NTP (Network Time Protocol)</td>
                        <td>Протокол для синхронизации времени между устройствами.</td>
                    </tr>
                    <tr>
                        <td>VLAN (Virtual Local Area Network)</td>
                        <td>Логическое разделение физической сети.</td>
                    </tr>
                    <tr>
                        <td>Trunk / Access</td>
                        <td>Типы портов коммутатора. Trunk передает трафик нескольких VLAN, Access — одной.</td>
                    </tr>
                    <tr>
                        <td>Native VLAN</td>
                        <td>VLAN, которая передается по trunk-порту без тега.</td>
                    </tr>
                    <tr>
                        <td>Aggregation (bonding, LACP)</td>
                        <td>Объединение нескольких физических каналов в один логический. active-backup — резервирование.</td>
                    </tr>
                    <tr>
                        <td>STP (Spanning Tree Protocol)</td>
                        <td>Протокол для предотвращения петель в сети.</td>
                    </tr>
                    <tr>
                        <td>802.1w (RSTP)</td>
                        <td>Улучшенная версия STP.</td>
                    </tr>
                    <tr>
                        <td>BGP (Border Gateway Protocol)</td>
                        <td>Протокол маршрутизации между автономными системами.</td>
                    </tr>
                    <tr>
                        <td>OSPF (Open Shortest Path First)</td>
                        <td>Протокол маршрутизации внутри AS.</td>
                    </tr>
                    <tr>
                        <td>GRE (Generic Routing Encapsulation)</td>
                        <td>Протокол туннелирования.</td>
                    </tr>
                    <tr>
                        <td>DNS (Domain Name System)</td>
                        <td>Система разрешения имен.</td>
                    </tr>
                    <tr>
                        <td>A/AAAA/PTR Records</td>
                        <td>Типы DNS-записей. A — имя -> IPv4, PTR — IPv4 -> имя.</td>
                    </tr>
                    <tr>
                        <td>Forwarder (переадресатор)</td>
                        <td>DNS-сервер, на который направляются запросы, которые не могут быть разрешены локально.</td>
                    </tr>
                    <tr>
                        <td>Forwarding Rules</td>
                        <td>Правила перенаправления запросов для конкретных зон на другие DNS-серверы.</td>
                    </tr>
                    <tr>
                        <td>CA (Certificate Authority)</td>
                        <td>Центр сертификации.</td>
                    </tr>
                    <tr>
                        <td>PostgreSQL</td>
                        <td>Система управления базами данных.</td>
                    </tr>
                    <tr>
                        <td>iSCSI</td>
                        <td>Протокол для подключения удаленных дисков.</td>
                    </tr>
                    <tr>
                        <td>Target / Initiator</td>
                        <td>Устройство, предоставляющее iSCSI-диск (Target) и устройство, подключающееся к нему (Initiator).</td>
                    </tr>
                    <tr>
                        <td>LVM (Logical Volume Manager)</td>
                        <td>Управление дисками через логические тома.</td>
                    </tr>
                    <tr>
                        <td>PV / VG / LV</td>
                        <td>Physical Volume, Volume Group, Logical Volume в LVM.</td>
                    </tr>
                    <tr>
                        <td>NFS (Network File System)</td>
                        <td>Протокол сетевого доступа к файлам.</td>
                    </tr>
                    <tr>
                        <td>Export</td>
                        <td>Директория, доступная через NFS.</td>
                    </tr>
                    <tr>
                        <td>AD (Active Directory)</td>
                        <td>Служба каталогов Microsoft (реализована в Samba AD).</td>
                    </tr>
                    <tr>
                        <td>DC (Domain Controller)</td>
                        <td>Контроллер домена.</td>
                    </tr>
                    <tr>
                        <td>Samba AD</td>
                        <td>Реализация Active Directory на базе Samba для Linux.</td>
                    </tr>
                    <tr>
                        <td>BIND9_DLZ</td>
                        <td>Встроенный DNS-движок в Samba AD.</td>
                    </tr>
                    <tr>
                        <td>OU (Organizational Unit)</td>
                        <td>Подразделение в AD.</td>
                    </tr>
                    <tr>
                        <td>GPO (Group Policy Object)</td>
                        <td>Объект групповой политики.</td>
                    </tr>
                    <tr>
                        <td>Zabbix</td>
                        <td>Система мониторинга.</td>
                    </tr>
                    <tr>
                        <td>VoIP (Voice over IP)</td>
                        <td>Технология передачи голоса по IP-сети.</td>
                    </tr>
                    <tr>
                        <td>SIP (Session Initiation Protocol)</td>
                        <td>Протокол для установки VoIP-сессий.</td>
                    </tr>
                    <tr>
                        <td>SNG7-PBX</td>
                        <td>Конкретная система IP-телефонии.</td>
                    </tr>
                    <tr>
                        <td>SoftPhone</td>
                        <td>Программа для совершения звонков с ПК.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 1: Базовая настройка -->
        <section id="stage1">
            <h2>Этап 1: Базовая настройка</h2>
            <p>Настройка имен хостов и административного доступа.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1.1.a.i Настроить FQDN для ЦОД</td>
                        <td><code>sudo hostnamectl set-hostname &lt;имя&gt;.cod.ssa2026.region</code></td>
                        <td>Изменение FQDN для устройств в ЦОД (например, rtr-cod.cod.ssa2026.region).</td>
                        <td>Все устройства ЦОД: rtr-cod, sw1-cod, sw2-cod, cli-cod, srv1-cod, srv2-cod, sip-cod, admin-cod</td>
                    </tr>
                    <tr>
                        <td>1.1.a.ii Настроить FQDN для офиса a</td>
                        <td><code>sudo hostnamectl set-hostname &lt;имя&gt;.office.ssa2026.region</code></td>
                        <td>Изменение FQDN для устройств в офисе a (например, dc-a.office.ssa2026.region).</td>
                        <td>Все устройства офиса a: rtr-a, sw1-a, sw2-a, dc-a, cli1-a, cli2-a</td>
                    </tr>
                    <tr>
                        <td>1.2.a.i Установить RADIUS-клиент</td>
                        <td><code>opkg update && opkg install radcli</code> (EcoRouterOS)</td>
                        <td>Установка клиента RADIUS на rtr-cod.</td>
                        <td>rtr-cod</td>
                    </tr>
                    <tr>
                        <td>1.2.a.ii Настроить RADIUS-сервер</td>
                        <td>(Установка и настройка FreeRADIUS на srv1-cod)</td>
                        <td>На srv1-cod должен быть установлен и настроен RADIUS-сервер. Нужно создать пользователя netuser с паролем P@ssw0rd и привилегией 15 (или эквивалентом для CLI).</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>1.2.a.iii Настроить RADIUS-клиент на rtr-cod (CLI)</td>
                        <td>В CLI: <code>radius-server host srv1-cod key P@ssw0rd</code>, <code>aaa new-model</code>, <code>aaa authentication login default group radius local</code></td>
                        <td>Указание сервера, ключа и метода аутентификации. 'local' — резерв.</td>
                        <td>rtr-cod (через CLI)</td>
                    </tr>
                    <tr>
                        <td>1.2.a.iii.1 Проверка отсутствия локального netuser</td>
                        <td>Проверить /etc/passwd или show users</td>
                        <td>Имя netuser не должно быть локальным пользователем на rtr-cod.</td>
                        <td>rtr-cod</td>
                    </tr>
                    <tr>
                        <td>1.2.a.iii.2 Проверка привилегий для netuser на srv1-cod</td>
                        <td>(Настройка в конфигурации FreeRADIUS)</td>
                        <td>Пользователь netuser должен иметь права конфигурировать маршрутизатор (Privilege-Level 15).</td>
                        <td>srv1-cod</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 2: Коммутация -->
        <section id="stage2">
            <h2>Этап 2: Коммутация</h2>
            <p>Настройка VLAN, агрегации каналов и STP.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2.1.a.b Настроить Trunk между sw1-cod и sw2-cod</td>
                        <td>Создать VLAN-интерфейсы: <code>sudo ip link add link eth0 name eth0.100 type vlan id 100</code>, ..., <code>sudo ip link add link eth0 name eth0.500 type vlan id 500</code>; Добавить в бридж: <code>sudo brctl addif br-trunk eth0.100</code>, ..., <code>sudo brctl addif br-trunk eth0.500</code></td>
                        <td>Настройка портов как Trunk, разрешающих VLAN 100-500.</td>
                        <td>sw1-cod, sw2-cod</td>
                    </tr>
                    <tr>
                        <td>2.1.c.i Настроить IP-адреса управления (VLAN MGMT-COD)</td>
                        <td><code>sudo ip addr add 10.0.3.10/24 dev br-mgmt</code> (для sw1-cod), <code>sudo ip addr add 10.0.3.11/24 dev br-mgmt</code> (для sw2-cod)</td>
                        <td>IP для управления в VLAN 300.</td>
                        <td>sw1-cod, sw2-cod</td>
                    </tr>
                    <tr>
                        <td>2.1.c.iii.iv Запретить маршрутизацию VLAN-DATA (MGMT-COD через Native VLAN)</td>
                        <td>Убедиться, что бридж для VLAN 200 (br-data) не имеет назначенного IP или маршрутизатора. Настроить порт на коммутаторе как Trunk с Native VLAN 300.</td>
                        <td>Трафик VLAN-DATA (200) не должен маршрутизироваться. Управление через Native VLAN 300.</td>
                        <td>sw1-cod, sw2-cod</td>
                    </tr>
                    <tr>
                        <td>2.2.a.b Создать агрегацию (bonding) между sw1-cod и sw2-cod</td>
                        <td><code>sudo modprobe bonding mode=active-backup miimon=100</code>, <code>sudo ip link add bond0 type bond mode active-backup miimon 100</code>, <code>sudo ip link set eth3 master bond0</code>, <code>sudo ip link set eth4 master bond0</code>, <code>sudo brctl addif br-mgmt bond0</code>.</td>
                        <td>Объединение физических портов eth3 и eth4 в логический канал bond0 с резервированием. Добавление bond0 в бридж управления (br-mgmt).</td>
                        <td>sw1-cod, sw2-cod</td>
                    </tr>
                    <tr>
                        <td>2.3.a.c Запустить STP и использовать 802.1w</td>
                        <td><code>sudo brctl stp br-data on</code> (на sw1-a, sw2-a)</td>
                        <td>Включаем протокол STP (обычно RSTP/802.1w по умолчанию) на бридж для данных (или общий бридж, если нет отдельного).</td>
                        <td>sw1-a, sw2-a</td>
                    </tr>
                    <tr>
                        <td>2.3.b Установить приоритет STP</td>
                        <td><code>sudo brctl setbridgeprio br-data 8192</code> (на sw1-a).</td>
                        <td>Меньшее значение делает sw1-a корневым мостом.</td>
                        <td>sw1-a</td>
                    </tr>
                    <tr>
                        <td>2.1.a.b Настроить Trunk/Access для офиса a</td>
                        <td>Следуя схеме L2 и таблице VLAN. Например, для порта к cli1-a: <code>sudo brctl addif br-cli eth0</code> (где br-cli - бридж для VLAN 200).</td>
                        <td>Настройка портов как Access или Trunk для VLAN 100, 200, 300.</td>
                        <td>sw1-a, sw2-a</td>
                    </tr>
                    <tr>
                        <td>2.1.c.ii Настроить IP-адреса управления (VLAN MGMT-A)</td>
                        <td><code>sudo ip addr add 10.0.3.110/24 dev br-mgmt</code> (для sw1-a), <code>sudo ip addr add 10.0.3.111/24 dev br-mgmt</code> (для sw2-a).</td>
                        <td>IP для управления в VLAN 300.</td>
                        <td>sw1-a, sw2-a</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 3: Маршрутизация -->
        <section id="stage3">
            <h2>Этап 3: Маршрутизация</h2>
            <p>Настройка BGP, OSPF.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>3.1.a Установить FRRouting</td>
                        <td><code>opkg update && opkg install frr frr-bgp frr-ospf</code> (EcoRouterOS)</td>
                        <td>Установка FRRouting на rtr-cod.</td>
                        <td>rtr-cod</td>
                    </tr>
                    <tr>
                        <td>3.1.a.b Настроить BGP с GIGAFON COD</td>
                        <td>В /etc/frr/bgpd.conf: <code>router bgp 64500</code>, <code>neighbor 178.207.179.1 remote-as 31133</code>, <code>address-family ipv4 unicast</code>, <code>neighbor 178.207.179.1 default-originate</code>, <code>exit-address-family</code>.</td>
                        <td>Настройка BGP-сессии с AS 31133 (GIGAFON). default-originate позволяет отправлять маршрут по умолчанию.</td>
                        <td>rtr-cod</td>
                    </tr>
                    <tr>
                        <td>3.1.b Запретить анонс внутренних сетей (фильтр)</td>
                        <td>В /etc/frr/bgpd.conf: <code>ip prefix-list INTERNAL seq 5 permit 10.0.0.0/8 le 32</code>, <code>route-map BLOCK_INTERNAL deny 10</code>, <code>match ip address prefix-list INTERNAL</code>, <code>route-map BLOCK_INTERNAL permit 20</code>, <code>router bgp 64500</code>, <code>neighbor 178.207.179.1 route-map BLOCK_INTERNAL out</code>.</td>
                        <td>Создание списка префиксов (наши внутренние сети 10.0.0.0/8), создание маршрутной карты (route-map), которая блокирует их (deny), и применение этой карты к исходящим анонсам соседу.</td>
                        <td>rtr-cod</td>
                    </tr>
                    <tr>
                        <td>3.2.a Настроить OSPF между rtr-cod, rtr-a, fw-cod</td>
                        <td>В /etc/frr/ospfd.conf: <code>router ospf</code>, <code>ospf router-id &lt;IP_роутера&gt;</code>, <code>network &lt;сеть&gt; area 0</code>.</td>
                        <td>Настройка OSPF в области 0 между указанными маршрутизаторами.</td>
                        <td>rtr-cod, rtr-a, fw-cod</td>
                    </tr>
                    <tr>
                        <td>3.2.b Перевести интерфейсы в пассивный режим</td>
                        <td>В /etc/frr/ospfd.conf: <code>passive-interface ethY</code> (для всех интерфейсов, кроме туннельного).</td>
                        <td>Предотвращение отправки Hello-пакетов на указанные интерфейсы, но сохранение маршрута.</td>
                        <td>rtr-cod, rtr-a, fw-cod</td>
                    </tr>
                    <tr>
                        <td>3.2.c.i.ii Настроить аутентификацию OSPF (MD5)</td>
                        <td>В /etc/frr/ospfd.conf: <code>area 0 authentication message-digest</code>, <code>interface ethX</code>, <code>ip ospf message-digest-key 1 md5 P@ssw0rd</code>.</td>
                        <td>Использование MD5 для защиты OSPF-пакетов. Пароль P@ssw0rd.</td>
                        <td>rtr-cod, rtr-a, fw-cod</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 4: Туннели -->
        <section id="stage4">
            <h2>Этап 4: Туннели</h2>
            <p>Настройка GRE туннеля между офисом "а" и "cod".</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>4.1.a.b Создать GRE-туннель между rtr-a и rtr-cod</td>
                        <td><strong>На rtr-a:</strong> <code>sudo ip tunnel add gre1 mode gre remote 10.10.10.2 local 10.10.10.1 ttl 255</code>, <code>sudo ip link set gre1 up</code>, <code>sudo ip addr add 10.10.10.1/30 dev gre1</code>. <strong>На rtr-cod:</strong> <code>sudo ip tunnel add gre1 mode gre remote 10.10.10.1 local 10.10.10.2 ttl 255</code>, <code>sudo ip link set gre1 up</code>, <code>sudo ip addr add 10.10.10.2/30 dev gre1</code>.</td>
                        <td>Создание виртуального канала GRE между rtr-a и rtr-cod в сети 10.10.10.0/24. Используется маска /30 для туннельных интерфейсов.</td>
                        <td>rtr-a, rtr-cod</td>
                    </tr>
                    <tr>
                        <td>4.1.b (Дополнительно) Добавить маршрут через туннель</td>
                        <td><strong>На rtr-a:</strong> <code>sudo ip route add 10.0.2.0/24 via 10.10.10.2 dev gre1</code>. <strong>На rtr-cod:</strong> <code>sudo ip route add 10.0.2.0/24 via 10.10.10.1 dev gre1</code>.</td>
                        <td>Маршруты к сетям офиса a (например, 10.0.2.0/24) через туннель.</td>
                        <td>rtr-a, rtr-cod</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 5: Доступ в Интернет -->
        <section id="stage5">
            <h2>Этап 5: Доступ в Интернет</h2>
            <p>Настройка маршрутизаторов для обеспечения доступа в Интернет.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>5.1 Настройка доступа в Интернет</td>
                        <td>Убедиться, что маршрут по умолчанию (0.0.0.0/0) получен через BGP на rtr-cod (см. Этап 3, задача 3.1.a.b).</td>
                        <td>Доступ в интернет обеспечивается через rtr-cod, который получает маршрут по умолчанию от провайдера GIGAFON.</td>
                        <td>rtr-cod</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 6: Синхронизация времени -->
        <section id="stage6">
            <h2>Этап 6: Синхронизация времени</h2>
            <p>Настройка синхронизации времени между сетевыми устройствами.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>6.1 Синхронизация времени</td>
                        <td><code>sudo timedatectl set-ntp true</code> или настроить chrony вручную (<code>sudo nano /etc/chrony/chrony.conf</code>, добавить <code>server 100.100.100.100 iburst</code>, <code>sudo systemctl restart chrony</code>).</td>
                        <td>Синхронизация времени с сервером 100.100.100.100.</td>
                        <td>Все устройства</td>
                    </tr>
                    <tr>
                        <td>6.2 Часовой пояс</td>
                        <td><code>sudo timedatectl set-timezone Europe/Moscow</code></td>
                        <td>Установка московского часового пояса.</td>
                        <td>Все устройства</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 7: DNS -->
        <section id="stage7">
            <h2>Этап 7: DNS</h2>
            <p>Настройка службы доменных имен.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <th>Пояснение</th>
                        <th>Где выполнять</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>7.1.a.b Создать A и PTR записи для cod</td>
                        <td>Создать файлы зон: <code>sudo nano /etc/bind/db.cod.ssa2026.region</code> (A-записи), <code>sudo nano /etc/bind/db.1.0.10</code>, <code>db.2.0.10</code> и т.д. (PTR-записи). Пример A: <code>rtr-cod IN A 10.0.1.1</code>. Пример PTR: <code>1.1.0.10.in-addr.arpa. IN PTR rtr-cod.cod.ssa2026.region.</code></td>
                        <td>Создание прямых и обратных записей для устройств ЦОД.</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>7.2.a.b Создать A и PTR записи для a</td>
                        <td>Создать файлы зон: <code>sudo nano /etc/bind/db.office.ssa2026.region</code> (A-записи), <code>sudo nano /etc/bind/db.2.0.10</code>, <code>db.3.0.10</code> (PTR-записи). Пример A: <code>cli1-a IN A 10.0.2.100</code>. Пример PTR: <code>100.2.0.10.in-addr.arpa. IN PTR cli1-a.office.ssa2026.region.</code></td>
                        <td>Создание прямых и обратных записей для устройств офиса a.</td>
                        <td>dc-a</td>
                    </tr>
                    <tr>
                        <td>7.3 Переадресация</td>
                        <td>В <code>/etc/bind/named.conf.options</code>: <code>options { forwarders { 100.100.100.100; }; };</code></td>
                        <td>Запрашиваемые имена, которые не могут быть разрешены локально, будут отправлены на 100.100.100.100.</td>
                        <td>srv1-cod, dc-a</td>
                    </tr>
                    <tr>
                        <td>7.4 Настройка DNS-серверов</td>
                        <td>В <code>/etc/resolv.conf</code>: <code>nameserver 10.0.1.1</code> (для ЦОД), <code>nameserver 10.0.1.100</code> (для офиса a).</td>
                        <td>Устройства ЦОД используют srv1-cod, офис a - dc-a.</td>
                        <td>Все устройства (ЦОД и офис a)</td>
                    </tr>
                    <tr>
                        <td>7.5.a Настройка перенаправления (forwarding rules)</td>
                        <td><strong>На srv1-cod:</strong> В <code>/etc/bind/named.conf.options</code>: <code>zone "office.ssa2026.region" { type forward; forward only; forwarders { 10.0.1.100; }; };</code>. <strong>На dc-a:</strong> В <code>/etc/bind/named.conf.options</code>: <code>zone "cod.ssa2026.region" { type forward; forward only; forwarders { 10.0.1.1; }; };</code>.</td>
                        <td>srv1-cod перенаправляет запросы к office.ssa2026.region на dc-a. dc-a перенаправляет запросы к cod.ssa2026.region на srv1-cod.</td>
                        <td>srv1-cod, dc-a</td>
                    </tr>
                    <tr>
                        <td>7.1.a Установить DNS-сервер (BIND9) на srv1-cod</td>
                        <td><code>sudo apt update && sudo apt install bind9</code></td>
                        <td>Устанавливаем BIND9.</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>7.2.a Установить DNS-сервер (BIND9) на dc-a</td>
                        <td><code>sudo apt update && sudo apt install bind9</code></td>
                        <td>Устанавливаем BIND9.</td>
                        <td>dc-a</td>
                    </tr>
                    <tr>
                        <td>Настроить named.conf.local</td>
                        <td>В <code>/etc/bind/named.conf.local</code>: <code>zone "cod.ssa2026.region" { type master; file "/etc/bind/db.cod.ssa2026.region"; };</code> и т.д. для обратных зон. Аналогично на dc-a.</td>
                        <td>Указываем файлы зон.</td>
                        <td>srv1-cod, dc-a</td>
                    </tr>
                    <tr>
                        <td>Перезапустить BIND</td>
                        <td><code>sudo systemctl restart bind9</code></td>
                        <td>Применение изменений.</td>
                        <td>srv1-cod, dc-a</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 8: Центр сертификации -->
        <section id="stage8">
            <h2>Этап 8: Центр сертификации</h2>
            <p>Настройка CA.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <td>Пояснение</td>
                        <td>Где выполнять</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>8.1.a-e Установить OpenSSL, создать директорию, конфиг, ключ и сертификат</td>
                        <td><code>sudo apt install openssl</code>; <code>sudo mkdir -p /var/ca/{certs,crl,newcerts,private}</code>; <code>sudo touch /var/ca/index.txt</code>; <code>echo 1000 | sudo tee /var/ca/serial</code>; <code>sudo nano /var/ca/ca.conf</code> (создать конфиг); <code>sudo openssl genrsa -out /var/ca/private/cakey.pem 4096</code>; <code>sudo openssl req -config /var/ca/ca.conf -new -x509 -days 1825 -key /var/ca/private/cakey.pem -out /var/ca/certs/cacert.pem</code>.</td>
                        <td>Создание структуры директорий, конфигурационного файла, генерация ключа и самоподписанного корневого сертификата на 5 лет (1825 дней).</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>8.2 Установить сертификат CA на рабочие станции</td>
                        <td>Скопировать <code>cacert.pem</code> на cli-cod, cli1-a, cli2-a, admin-cod. Затем: <code>sudo cp cacert.pem /usr/local/share/ca-certificates/ssa2026.crt</code>, <code>sudo update-ca-certificates</code>.</td>
                        <td>Добавляем корневой сертификат в доверенные.</td>
                        <td>cli-cod, cli1-a, cli2-a, admin-cod</td>
                    </tr>
                    <tr>
                        <td>8.3 Использовать созданный центр сертификации</td>
                        <td>(Пример: выпуск сертификата для Zabbix)</td>
                        <td>CA будет использоваться для подписи сертификатов, например, для HTTPS веб-интерфейса Zabbix.</td>
                        <td>srv1-cod (при настройке Zabbix)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 9: База данных -->
        <section id="stage9">
            <h2>Этап 9: База данных</h2>
            <p>Настройка PostgreSQL.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <td>Пояснение</td>
                        <td>Где выполнять</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>9.1.a.i Установить PostgreSQL (версия >= 17)</td>
                        <td><code>sudo apt update && sudo apt install postgresql-17</code></td>
                        <td>Устанавливаем PostgreSQL.</td>
                        <td>srv2-cod</td>
                    </tr>
                    <tr>
                        <td>9.1.a.i Запустить и включить службу PostgreSQL</td>
                        <td><code>sudo systemctl start postgresql</code>, <code>sudo systemctl enable postgresql</code></td>
                        <td>Запуск и автозапуск.</td>
                        <td>srv2-cod</td>
                    </tr>
                    <tr>
                        <td>9.1.c.i Создать суперпользователя superadmin</td>
                        <td><code>sudo -u postgres psql -c "CREATE USER superadmin WITH SUPERUSER PASSWORD 'P@ssw0rdSQL';"</code></td>
                        <td>Создаем нового суперпользователя.</td>
                        <td>srv2-cod</td>
                    </tr>
                    <tr>
                        <td>9.2.a Установить DBeaver на admin-cod</td>
                        <td><code>sudo apt install dbeaver-ce</code> или скачать</td>
                        <td>Устанавливаем клиент для администрирования.</td>
                        <td>admin-cod</td>
                    </tr>
                    <tr>
                        <td>9.2.a Настроить DBeaver (на admin-cod)</td>
                        <td>(Создание подключения к srv2-cod, указание хоста, порта, имени пользователя superadmin, пароля)</td>
                        <td>Подключаемся к базе данных.</td>
                        <td>admin-cod</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 10: Хранилище -->
        <section id="stage10">
            <h2>Этап 10: Хранилище</h2>
            <p>Настройка iSCSI, LVM, NFS.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <td>Пояснение</td>
                        <td>Где выполнять</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>10.1.a Настроить VLAN DATA на srv2-cod</td>
                        <td><code>sudo ip link add link eth0 name eth0.200 type vlan id 200</code>, <code>sudo ip link set eth0.200 up</code>, <code>sudo ip addr add 10.0.2.202/24 dev eth0.200</code></td>
                        <td>Поднимаем интерфейс VLAN DATA.</td>
                        <td>srv2-cod</td>
                    </tr>
                    <tr>
                        <td>10.1.b.i.ii Настроить iSCSI Target</td>
                        <td><code>sudo apt install targetcli-fb</code>; <code>sudo targetcli /backstores/block create data_block /dev/&lt;free_disk&gt;</code>; <code>sudo targetcli /iscsi create iqn.2026-01.region.ssa2026.cod:data.target</code>; <code>sudo targetcli /iscsi/iqn.2026-01.region.ssa2026.cod:data.target/tpg1/luns create /backstores/block/data_block</code>; <code>sudo targetcli /iscsi/iqn.2026-01.region.ssa2026.cod:data.target/tpg1/acls create iqn.2026-01.region.ssa2026.cod:iscsi</code>; <code>sudo targetcli saveconfig</code>.</td>
                        <td>Устанавливаем targetcli, создаем backstore (блок устройства), создаем iSCSI target с указанным IQN, привязываем backstore к target, настраиваем ACL (доступ для инициатора), сохраняем конфигурацию.</td>
                        <td>srv2-cod</td>
                    </tr>
                    <tr>
                        <td>10.2.a.i.ii.iii Настроить iSCSI Initiator на srv1-cod</td>
                        <td><code>sudo apt install open-iscsi</code>; <code>sudo nano /etc/iscsi/initiatorname.iscsi</code> (установить <code>InitiatorName=iqn.2026-01.region.ssa2026.cod:iscsi</code>); <code>sudo systemctl restart iscsid</code>; <code>sudo iscsiadm -m discovery -t sendtargets -p 10.0.2.202</code>; <code>sudo iscsiadm -m node -T iqn.2026-01.region.ssa2026.cod:data.target -p 10.0.2.202:3260 -l</code>.</td>
                        <td>Устанавливаем open-iscsi, указываем имя инициатора, перезапускаем демон, находим target, открываем сессию.</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>10.2.b.i.ii.iii.iv Настроить LVM на srv1-cod</td>
                        <td><code>sudo pvcreate /dev/&lt;новый_диск_от_target&gt;</code> (например, /dev/sda); <code>sudo vgcreate VG /dev/&lt;новый_диск_от_target&gt;</code>; <code>sudo lvcreate -l 100%FREE -n DATA VG</code>; <code>sudo mkfs.xfs /dev/VG/DATA</code>.</td>
                        <td>Создаем физический том из диска iSCSI, группу томов VG, логический том DATA, форматируем под XFS.</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>10.2.b.v.vi Настроить монтирование и NFS</td>
                        <td><strong>Монтирование:</strong> <code>sudo nano /etc/fstab</code> (добавить <code>/dev/VG/DATA /opt/data xfs defaults 0 0</code>); <code>sudo mkdir -p /opt/data</code>; <code>sudo mount /opt/data</code>. <strong>NFS:</strong> <code>sudo apt install nfs-kernel-server</code>; <code>sudo nano /etc/exports</code> (добавить <code>/opt/data 10.0.3.0/24(rw,sync,no_root_squash,no_subtree_check)</code>); <code>sudo exportfs -ra</code>; <code>sudo systemctl restart nfs-server</code>.</td>
                        <td>Настройка автоматического монтирования LVM-тома и экспорта директории /opt/data по NFS для сети MGMT-COD.</td>
                        <td>srv1-cod</td>
                    </tr>
                    <tr>
                        <td>10.3 Настроить автомонтирование NFS на admin-cod</td>
                        <td><code>sudo mkdir -p /mnt/nfs</code>; <code>sudo nano /etc/fstab</code> (добавить <code>srv1-cod.cod.ssa2026.region:/opt/data /mnt/nfs nfs defaults 0 0</code>); <code>sudo mount /mnt/nfs</code>.</td>
                        <td>Автомонтирование экспортированной директории NFS.</td>
                        <td>admin-cod</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 11: Active Directory -->
        <section id="stage11">
            <h2>Этап 11: Active Directory</h2>
            <p>Настройка Samba AD.</p>
            <table>
                <thead>
                    <tr>
                        <th>Задача</th>
                        <th>Команда / Действие</th>
                        <td>Пояснение</td>
                        <td>Где выполнять</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>11.1.a.b.c.i Установить Samba AD, выполнить provision</td>
                        <td><code>sudo apt install samba samba-common-bin smbclient winbind</code>; <code>sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.backup</code>; <code>sudo samba-tool domain provision --realm=office.ssa2026.region --domain=OFFICE --adminpass=P@ssw0rd --server-role=dc --dns-backend=BIND9_DLZ</code>; <code>sudo systemctl stop smbd nmbd</code>; <code>sudo systemctl disable smbd nmbd</code>; <code>sudo systemctl enable samba-ad-dc</code>; <code>sudo systemctl start samba-ad-dc</code>.</td>
                        <td>Устанавливаем Samba, резервируем старый конфиг, создаем домен OFFICE с realm office.ssa2026.region, используем P@ssw0rd как пароль администратора, роль DC, DNS backend BIND9_DLZ. Останавливаем старые службы, запускаем новую.</td>
                        <td>dc-a</td>
                    </tr>
                    <tr>
                        <td>11.2 Установить ADMC</td>
                        <td>Скачать и установить ADMC (например, через flatpak/snap/apt).</td>
                        <td>Инструмент для управления AD.</td>
                        <td>cli1-a</td>
                    </tr>
                    <tr>
                        <td>11.3.a.b.i.ii Создать OU, группы, пользователей</td>
                        <td>Через <code>samba-tool</code> или <code>admc</code>: <code>samba-tool ou create "OU=ofadmins,DC=office,DC=ssa2026,DC=region"</code>; <code>samba-tool ou create "OU=ofusers,DC=office,DC=ssa2026,DC=region"</code>; <code>samba-tool group add ofadmins --description="Office Admins"</code>; <code>samba-tool group add ofusers --description="Office Users"</code>; <code>samba-tool user create ofadmin1 P@ssw0rd --given-name=OfAdmin --surname=Ivanov</code>; <code>samba-tool user create ofuser1 P@ssw0rd --given-name=OfUser --surname=Petrov</code>; <code>samba-tool user create user1 P@ssw0rd --given-name=User --surname=Sidorov</code>.</td>
                        <td>Создаем подразделения, группы и пользователей.</td>
                        <td>dc-a (или через admc)</td>
                    </tr>
                    <tr>
                        <td>11.3.b.i.ii.iii Добавить пользователей в OU и группы</td>
                        <td>Через <code>samba-tool</code> или <code>admc</code>: <code>samba-tool user move "cn=ofadmin1,cn=Users,DC=office,DC=ssa2026,DC=region" "OU=ofadmins,DC=office,DC=ssa2026,DC=region"</code>; <code>samba-tool group addmembers ofadmins ofadmin1</code>; <code>samba-tool user move "cn=ofuser1,cn=Users,DC=office,DC=ssa2026,DC=region" "OU=ofusers,DC=office,DC=ssa2026,DC=region"</code>; <code>samba-tool group addmembers ofusers ofuser1</code>; <code>samba-tool user move "cn=user1,cn=Users,DC=office,DC=ssa2026,DC=region" "OU=ofusers,DC=office,DC=ssa2026,DC=region"</code> (не добавлять в группы).</td>
                        <td>Помещаем пользователей в OU и добавляем в соответствующие группы (user1 - только в OU).</td>
                        <td>dc-a (или через admc)</td>
                    </tr>
                    <tr>
                        <td>11.4 Настроить политику GPO</td>
                        <td>(Через admc на cli1-a)</td>
                        <td>Создать GPO, привязать к OU 'ofusers'. Настроить: запрет изменения сетевых настроек, запрет изменения параметров рабочего стола, установка фонового изображения.</td>
                        <td>cli1-a (через admc -> dc-a)</td>
                    </tr>
                    <tr>
                        <td>11.5 Ввести cli1-a и cli2-a в домен</td>
                        <td><code>sudo realm join OFFICE.SSA2026.REGION -U administrator</code> (вводим P@ssw0rd). Установить <code>realmd</code>, <code>sssd</code>, <code>krb5-user</code>, <code>samba-common-bin</code> если нужно.</td>
                        <td>Присоединение к домену.</td>
                        <td>cli1-a, cli2-a</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Секция 12: Мониторинг -->
        <section id="stage12">
            <h2>Этап 12: Мониторинг</h2>
            <p>Настройка Zabbix.</p>
            <p>(Секция будет заполнена аналогично предыдущим этапам, когда вы выполните настройку Zabbix)</p>
        </section>

        <!-- Секция 13: VoIP -->
        <section id="stage13">
            <h2>Этап 13: VoIP</h2>
            <p>Настройка SNG7-PBX.</p>
            <p>(Секция будет заполнена аналогично предыдущим этапам, когда вы выполните настройку VoIP)</p>
        </section>

    </main>

    <footer>
        <h3>Полезные ссылки</h3>
        <ul>
            <li><a href="https://www.kernel.org/doc/Documentation/networking/bonding.txt" target="_blank">Linux Bonding Driver Documentation</a></li>
            <li><a href="https://lartc.org/howto/" target="_blank">Linux Advanced Routing & Traffic Control HOWTO</a></li>
            <li><a href="https://docs.frrouting.org/en/latest/" target="_blank">FRRouting Documentation</a></li>
            <li><a href="https://wiki.samba.org/index.php/Samba_AD_DC_HOWTO_(Russian)" target="_blank">Samba AD DC HOWTO (Russian)</a></li>
            <li><a href="https://kb.ispsystem.ru/articles/dns/konfiguracija-sistemy-bind9" target="_blank">BIND9 Documentation (RU)</a></li>
            <li><a href="https://postgrespro.ru/docs/postgresql/17" target="_blank">PostgreSQL Documentation (RU)</a></li>
            <li><a href="https://help.ubuntu.ru/wiki/nfs" target="_blank">NFS Server Setup (RU)</a></li>
            <li><a href="https://jamielinux.com/docs/openssl-certificate-authority/" target="_blank">OpenSSL Certificate Authority</a></li>
            <li><a href="https://zabbix.com/documentation/current/manual/installation" target="_blank">Zabbix Installation Manual</a></li>
            <li><a href="https://ecorouter.ru/documentation/" target="_blank">EcoRouterOS Documentation</a></li>
        </ul>
    </footer>

</body>
</html>